<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>고척 푸르지오 힐스테이트 입주예정자협의회 위임 동의서</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- 미니멀 헤더 - 배경 이미지 섹션 -->
    <header class="minimal-header">
        <div class="header-content">
            <h1 class="header-title">고척푸르지오힐스테이트 입주예정자협의회</h1>
            <p class="header-subtitle">위임 동의서 온라인 제출 시스템</p>
        </div>
    </header>

    <!-- 메인 폼 컨테이너 -->
    <div class="container">
        <!-- 진행률 표시 (점 방식) -->
        <div class="progress-indicator">
            <div class="progress-dot completed"></div>
            <div class="progress-dot active"></div>
            <div class="progress-dot"></div>
            <div class="progress-dot"></div>
        </div>
        <div class="text-right mb-20">
            <button type="button" id="open-edit-modal-btn" class="btn btn-link">이미 제출하셨나요? 내용 수정하기</button>
        </div>

        <form id="consent-form">
            <!-- 카드 1: 중요 안내 -->
            <div class="floating-card">
                <div class="card-header">
                    <h3>📋 위임 동의서 안내</h3>
                    <p>동의서 작성 전 반드시 확인해주세요</p>
                </div>
                <div class="card-content">
                    <div style="background: rgba(19, 45, 37, 0.05); border: 2px solid #132D25; border-radius: 12px; padding: 25px; font-size: 1rem; line-height: 1.8; color: #2c3e50;">
                        본인은 고척푸르지오힐스테이트 아파트 입주예정자(분양자 및 배우자, 직계 존비속)로서, '고척푸르지오힐스테이트 입주예정자협의회'의 회칙을 준수하고, 회원으로서의 역할을 충실히 수행하며, 수임인인 '고척푸르지오힐스테이트 입주예정자협의회'를 입주예정자의 권익을 대표하는 공식단체임을 인정하며, 협의회 본연의 역할 수행과 원활한 운영을 위해 아래 사항에 대한 권한을 위임하는 것에 동의합니다.
                    </div>
                </div>
            </div>

            <!-- 카드 2: 기본 정보 -->
            <div class="floating-card">
                <div class="card-header">
                    <h3>기본 정보</h3>
                    <p>동의서 작성을 위한 기본 정보를 입력해주세요</p>
                </div>
                <div class="card-content">
                    <section class="form-section">
                <div class="form-group hidden" id="original-email-section">
                    <label>이메일 주소 (수정 불가)</label>
                    <p id="original-email-display" style="font-weight: bold; padding: 10px; background-color: #f8f9fa; border-radius: 6px;"></p>
                </div>
            
                <div id="email-verification-section">
                    <div class="form-group">
                        <label for="email">이메일 주소</label>
                        <div class="input-with-button">
                            <input type="email" id="email" name="email" placeholder="인증코드를 받을 이메일을 입력하세요" required>
                            <button type="button" id="send-verification-btn" class="btn btn-secondary">인증번호 발송</button>
                        </div>
                    </div>
                    <div class="form-group hidden" id="verification-code-group">
                        <label for="verification-code">인증번호</label>
                        <div class="input-with-button">
                            <input type="text" id="verification-code" name="verification-code" placeholder="6자리 인증번호를 입력하세요">
                            <button type="button" id="confirm-verification-btn" class="btn btn-secondary">인증번호 확인</button>
                        </div>
                        <p id="email-status-msg" class="status-msg"></p>
                    </div>
                </div>
                <div class="form-group">
                    <label for="fullName">1. 성명 (계약서와 일치)</label>
                    <input type="text" id="fullName" name="fullName" required>
                    <div class="field-error hidden" id="fullName-error"></div>
                </div>
                <div class="form-group">
                    <label>1-1. 본 설문을 작성하시는 분은 계약자 본인이십니까?</label>
                    <div class="radio-group">
                        <label><input type="radio" name="isContractor" value="예" required> 예</label>
                        <label><input type="radio" name="isContractor" value="아니오"> 아니오</label>
                    </div>
                    <div class="field-error hidden" id="isContractor-error"></div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="dongHo">2. 동 호수</label>
                        <input type="text" id="dongHo" name="dongHo" placeholder="예: 101동 1203호" required>
                        <div class="field-error hidden" id="dongHo-error"></div>
                    </div>
                    <div class="form-group">
                        <label for="dob">3. 생년월일 (8자리)</label>
                        <input type="text" id="dob" name="dob" placeholder="예: 19900101" maxlength="8" inputmode="numeric" required>
                        <div class="field-error hidden" id="dob-error"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="phone">4. 연락처</label>
                    <input type="tel" id="phone" name="phone" placeholder="'-' 없이 숫자만 입력" required>
                    <div class="field-error hidden" id="phone-error"></div>
                </div>
                 <div class="form-group">
                    <label for="editPassword">수정용 비밀번호 (최대 숫자 4자리)</label>
                    <input type="password" id="editPassword" name="editPassword" placeholder="데이터 수정 시 필요" maxlength="4" inputmode="numeric" required>
                    <div class="field-error hidden" id="editPassword-error"></div>
                </div>
                    </section>
                </div>
            </div>

            <!-- 카드 3: 계약서 첨부 -->
            <div class="floating-card">
                <div class="card-header">
                    <h3>계약서 사진 첨부</h3>
                    <p>공급계약서 사진을 업로드해주세요</p>
                </div>
                <div class="card-content">
                    <section class="form-section">

                <div class="description">
                    <p>
                        <strong>[이렇게 첨부해 주세요]</strong><br>
                        - <b>공급계약서를 동호수와 계약자 본인 이름이 함께 보이도록</b> 사진 첨부 바랍니다.<br>
                        - 명의변경의 경우, 변경내역까지 업로드 바랍니다.<br>
                        - <b style="color: red;">주민등록번호 뒷자리는 반드시 가려주세요.</b><br>
                        - 파일 형식은 이미지 파일만 가능합니다.<br>
                    </p>
                    <p>
                        아래 예시 이미지처럼 '자르기'를 활용하여 하단 이름 밑으로 이미지를 잘라서 첨부하시면 편합니다.
                    </p>
                </div>

                <div class="example-image-container">
                    <img src="img/example.png" alt="계약서 첨부 예시" class="example-image">
                </div>

                <hr class="divider">

                <div class="form-group">
                    <label for="contractImage"><strong>계약서 파일 첨부:</strong></label>
                    <input type="file" id="contractImage" name="contractImage" accept="image/*" required>
                    <img id="contract-preview" class="preview-image hidden" alt="계약서 미리보기">
                    <div class="field-error hidden" id="contractImage-error"></div>
                </div>
            </section>
                </div>
            </div>

            <!-- 카드 4: 위임 내용 동의 -->
            <div class="floating-card">
                <div class="card-header">
                    <h3>위임 내용 동의</h3>
                    <p>위임사항을 확인하고 동의해주세요</p>
                </div>
                <div class="card-content">
                    <section class="form-section">
                        <h3 class="section-title">6. 위임 내용</h3>
                <div class="terms-box">
                    <p><strong>고척푸르지오힐스테이트에 관한 사항으로, 위임인은 수임인에게 아래의 위임 내용에 대한 모든 권한을 부여하는 데 동의하며, 추후 의결된 안건에 대해서는 일체의 민·형사상 책임을 묻지 않을 것을 서약합니다.</strong></p>
                    <h3>1. &nbsp; 수임인의 소임</h3>
                    <ol type="1" start="1">
                        <li>시행사, 시공사(이하 ‘시공사 등’)가 시공하는 ‘고척푸르지오힐스테이트’와 관련된 다음 각 호의 사항에 관하여, 시행사, 시공사, 서울특별시 등 정부기관, 은행 등 금융기관, 한국전력공사, 지역냉난방공사 등의 공공기관과의 관계에서 수분양자의 권익을 보호하기 위하여 필요한 협상, 동의, 계약 체결 등의 제반 권한을 행사하여야 한다.</li>
                        <li>모든 위임 내용의 집행은 그 내용을 <b><u>‘고척푸르지오힐스테이트 입주예정자 협의회’</b></u>에 공지하여야 하며, 아래 위임 내용을 집행할 때에는 입주예정자 협의회에서 제정한 <b><u>‘고척푸르지오힐스테이트 입주예정자협의회 회칙’을 준수하여야 한다.</b></u></li>
                        <li>본 위임장은 아래 ‘위임 내용’의 목적 외에는 사용할 수 없다.</li>
                    </ol>
                    <h3>2. &nbsp; 위임 내용</h3>
                    <ol type="1" start="1">
                        <li>시공사 등이 시공하는 '고척푸르지오힐스테이트' 와 관련된 다음 각 호의 사항
                            <ol style="list-style-type: hangul;">
                                <li>각 세대 및 공용 부분의 마감재 향상 등 품질 상향에 관한 사항</li>
                                <li>아파트 내·외부 시공 등 건설에 관한 사항</li>
                                <li>진입로·보행로, 교통, 학교, 소음 등 주거환경 개선에 관한 사항</li>
                                <li>하자 보수와 관련된 제반 사항</li>
                                <li>입주예정자의 민원, 금융, 법률 등 이에 준하는 기관 및 관리사무소 또는 개인과의 일체 협상 및 계약 체결에 관한 사항</li>
                                <li>입주예정자협의회의 홍보, 회비 집행 및 관리.</li>
                                <li>상기 가.항 내지 바.항의 목적 달성을 위해, 시행사, 시공사, 금융기관, 교육청, 관할관청, 관리사무소 등 관계 기관 및 개인에 대한 민원 제기, 협상, 계약 체결 등 입주예정자 전체의 공동 이익 증진을 위한 제반 업무에 관한 사항</li>
                            </ol>
                        </li>
                        <li>본 위임 사항과 관련된 권한을 제 3 자(변호사, 법무사 등)에게 재위임할 수 있는 권한</li>
                    </ol>
                    <h3>3. &nbsp; 위임 기간 및 위임의 철회</h3>
                    <ol type="1" start="1">
                        <li>위임 기간은 입주 후 주택법 및 동법 시행령에서 규정하는 ‘입주자대표회의’가 구성되기 전까지로 한다.</li>
                        <li>위임인은 본인의 의사에 따라 위임을 철회할 수 있으며, 철회의 의사표시를 한 날로부터 철회된 것으로 본다.</li>
                    </ol>
                </div>
                <div class="radio-group">
                    <label><input type="radio" name="agreeTermsRadio" value="agree" required> <strong>동의합니다</strong></label>
                    <label><input type="radio" name="agreeTermsRadio" value="disagree"> <strong>동의하지 않습니다</strong></label>
                </div>
                <div class="field-error hidden" id="agreeTermsRadio-error"></div>
                    </section>
                </div>
            </div>

            <!-- 카드 5: 개인정보 동의사항 -->
            <div class="floating-card">
                <div class="card-header">
                    <h3>개인정보 동의사항</h3>
                    <p>개인정보 수집·이용 및 제3자 제공에 동의해주세요</p>
                    <div class="header-checkbox-group">
                        <label class="header-checkbox-label">
                            <input type="checkbox" id="agreeAllPrivacy" class="header-checkbox">
                            <span class="header-checkbox-text">전체 동의</span>
                        </label>
                    </div>
                </div>
                <div class="card-content">
                    <section class="form-section">
                        <h3 class="section-title">7. 개인정보 수집 및 이용 동의</h3>
                <p class="description">
                    개인정보보호법 등 관련 법규에 의거하여 ‘고척푸르지오힐스테이트’ 입주예정자협의회에서는 위임인의 개인정보 수집 및 활용과 필요시 제3자 제공에 필요한 개인정보 수집 및 활용 / 제3자 동의서를 받고 있습니다. 개인정보 제공자가 동의한 내용 외의 다른 목적으로 활용하지 않으며, 제공된 개인정보 이용을 거부하고자 할 경우에는 개인정보 관리책임자를 통해 열람, 정정, 삭제 등을 요구할 수 있습니다. <b>귀하는 위 개인정보 수집·이용에 대한 동의를 거부할 권리가 있습니다. 단, 동의를 거부할 경우 본 설문의 참여는 불가능하며 위임 동의서 제출을 통한 입주예정자협의회 활동 참여가 제한됩니다.</b>
                </p>
                <div class="info-block-container">
                    <div class="info-block">
                        <h4>수집하는 개인정보 항목</h4>
                        <p>성명, 생년월일, 동·호수, 연락처, 주소, 이메일 주소</p>
                    </div>
                    <div class="info-block">
                        <h4>수집 및 이용 목적</h4>
                        <ol>
                            <li>위임 동의서 제출자 본인 확인 및 위임 효력 검증</li>
                            <li>시행사·시공사 등 관계 기관과의 협의를 위한 대표성 증명</li>
                            <li>총회 소집, 공지사항 전달 등 협의회 운영을 위한 소통</li>
                            <li>하자 접수, 민원 대응 등 입주예정자 권익 보호 업무 수행</li>
                        </ol>
                    </div>
                    <div class="info-block">
                        <h4>보유 및 이용기간</h4>
                        <p style="color: red;">동의일로부터 아파트 준공 및 입주 후, 입주자대표회의가 발족하여 업무가 인계될 때까지</p>
                    </div>
                </div>
                <div class="checkbox-group">
                    <label><input type="checkbox" id="agreePrivacy" name="agreePrivacy" required> <strong>동의합니다</strong></label>
                </div>
                <div class="field-error hidden" id="agreePrivacy-error"></div>
            </section>

            <section class="form-section">
                <h3 class="section-title">8. 개인정보 제3자 제공 동의</h3>
                <p class="description">고척푸르지오힐스테이트 입주 예정자 협의회는 개인정보를 원칙적으로 제 3자에게 제공하지 않으며, 다만 시행사와 시공사, 정부기관 등이 법령에 근거하여 이용자의 개인정보를 강제하는 경우 개인정보를 제공할 수 있습니다.<b>귀하는 위 개인정보 제3자 제공에 대한 동의를 거부할 권리가 있습니다. 단, 동의를 거부할 경우 본 설문의 참여는 불가능하며 위임 동의서 제출을 통한 입주예정자협의회 활동 참여가 제한됩니다.</b></p>
                <div class="info-block-container">
                    <div class="info-block">
                        <h4>제공받는 자</h4>
                        <p>시행사(고척제4주택재개발정비사업조합), 시공사(대우건설, 현대엔지니어링), 관계 행정기관(구로구청, 서울특별시청 등)</p>
                    </div>
                    <div class="info-block">
                        <h4>제공받는 자의 이용 목적</h4>
                        <ol>
                            <li>입주예정자협의회의 법적 대표성 및 위임 사실 증명</li>
                            <li>분양 계약자 확인 및 입주 관련 민원 대응·협의</li>
                            <li>입주예정자 권익 보호 관련 업무</li>
                        </ol>
                    </div>
                    <div class="info-block">
                        <h4>제공하는 항목</h4>
                        <p>성명, 생년월일, 동·호수, 연락처, 주소, 이메일 주소</p>
                    </div>
                     <div class="info-block">
                        <h4>제공받는 자의 보유 및 이용기간</h4>
                        <p style="color: red;">동의일로부터 아파트 준공 및 입주 후, 입주자대표회의가 발족하여 업무가 인계될 때까지</p>
                    </div>
                </div>
                 <div class="checkbox-group">
                    <label><input type="checkbox" id="agreeProvider" name="agreeProvider" required> <strong>동의합니다</strong></label>
                </div>
                <div class="field-error hidden" id="agreeProvider-error"></div>
            </section>
                </div>
            </div>

            <!-- 카드 6: 홍보 동의사항 -->
            <div class="floating-card">
                <div class="card-header">
                    <h3>홍보 동의사항 (선택)</h3>
                    <p>홍보 소식 전달을 위한 동의사항입니다</p>
                </div>
                <div class="card-content">
                    <section class="form-section">
                        <h3 class="section-title">9. 홍보 및 소식 전달을 위한 개인정보 수집·이용 동의 (선택)</h3>
                <p class="description">고척 푸르지오 힐스테이트 입주예정자 협의회는 협의회 활동 소식 등을 효과적으로 전달하기 위해 아래와 같이 개인정보를 수집·이용합니다.</p>
                 <div class="info-block-container">
                    <div class="info-block">
                        <h4>수집 이용·목적</h4>
                        <p>협의회 활동 소식 및 정보 전달(이메일, 문자메세지 등)</p>
                    </div>
                    <div class="info-block">
                        <h4>수집 항목</h4>
                        <p>성명, 생년월일, 동·호수, 연락처, 주소, 이메일 주소</p>
                    </div>
                     <div class="info-block">
                        <h4>보유·이용기간</h4>
                        <p>동의일로부터 아파트 준공 및 입주 후, 입주자대표회의가 발족하여 업무가 인계될때까지</p>
                    </div>
                     <div class="info-block">
                        <h4>동의 거부 권리</h4>
                        <p>귀하는 위 개인정보 수집·이용에 대한 선택적 동의를 거부할 수 있으며, 거부하더라도 위임 동의서 제출 및 협의회 활동에 어떠한 불이익도 없습니다.</p>
                    </div>
                </div>
                <br>
                <div class="radio-group">
                    <label><input type="radio" name="agreeMarketingRadio" value="agree"> <strong>동의합니다</strong></label>
                    <label><input type="radio" name="agreeMarketingRadio" value="disagree"> <strong>동의하지 않습니다</strong></label>
                </div>
            </section>
                </div>
            </div>

            <!-- 카드 7: 서명 및 마무리 -->
            <div class="floating-card">
                <div class="card-header">
                    <h3>서명 및 마무리</h3>                    
                </div>
                <div class="card-content">
                    <section class="form-section">
                        <h3 class="section-title">10. 서명</h3>
                <img id="signature-preview" class="preview-image hidden" alt="기존 서명 미리보기">
                <p class="description">위 모든 약관에 동의한다는 의미로, 아래 두 칸에 각각 <b>이름과 서명을 정자체로 직접 써주세요.</b>(수정 시, 새로 입력하지 않으면 기존 서명이 유지됩니다)</p>
                
                <div class="form-group">
                    <label>이름 (정자체로 직접 쓰기)</label>
                    <div class="signature-pad-container">
                        <canvas id="name-pad"></canvas>
                        <button type="button" id="clear-name" class="btn btn-secondary btn-sm" style="position: absolute; top: 10px; right: 10px;">지우기</button>
                    </div>
                </div>
                <div class="form-group">
                     <label>서명</label>
                    <div class="signature-pad-container">
                        <canvas id="signature-pad"></canvas>
                        <button type="button" id="clear-signature" class="btn btn-secondary btn-sm" style="position: absolute; top: 10px; right: 10px;">지우기</button>
                    </div>
                    <div class="field-error hidden" id="signature-error"></div>
                </div>
            </section>

            <section class="form-section">
                <h3 class="section-title">11. (선택) 명의변경 등의 변경 내역 확인 필요 시 사진 첨부</h3>
                <div class="form-group">
                    <label for="nameChangeImage">파일 첨부:</label>
                    <input type="file" id="nameChangeImage" name="nameChangeImage" accept="image/*">
                    <img id="nameChange-preview" class="preview-image hidden" alt="명의변경 미리보기">
                </div>
            </section>

            <div class="submit-container">
                <button type="submit" id="submit-btn" class="btn btn-primary btn-block">제출하기</button>
            </div>
                </div>
            </div>
        </form>
        </div> <!-- form-content 닫기 -->
    </div> <!-- container 닫기 -->
    
    <div id="loading-modal" class="modal-overlay hidden">
        <div class="spinner"></div>
    </div>

    <!-- 수정 요청 모달 -->
    <div id="edit-request-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button id="close-edit-modal-btn" class="close-btn">&times;</button>
            <h2>제출 내용 수정</h2>
            <p>동의서 제출 시 입력했던 이메일 주소와 수정용 비밀번호(4자리)를 입력해주세요.</p>
            <div class="form-group">
                <label for="edit-email">이메일 주소</label>
                <input type="email" id="edit-email" placeholder="제출 시 사용한 이메일">
            </div>
            <div class="form-group">
                <label for="edit-password-check">수정용 비밀번호</label>
                <input type="password" id="edit-password-check" placeholder="4자리 숫자" maxlength="4">
            </div>
            <button id="request-edit-link-btn" class="btn btn-primary btn-block">수정 링크 요청</button>
            <p id="edit-status-msg" class="status-msg"></p>
        </div>
    </div>

    <!-- 이미지 크롭 모달 -->
    <div id="crop-modal" class="modal-overlay hidden">
        <div class="crop-modal-content">
            <div class="card-header">
                <h3>📐 이미지 편집</h3>
                <p>회전하거나 필요한 부분만 자를 수 있습니다</p>
                <button id="close-crop-modal-btn" class="close-btn">&times;</button>
            </div>
            <div class="card-content">
                <div class="crop-container">
                    <img id="crop-image" alt="편집할 이미지">
                </div>
                <div class="crop-controls">
                    <button id="rotate-left-btn" class="btn btn-secondary">
                        <span class="rotate-icon">↺</span> 좌회전
                    </button>
                    <button id="rotate-right-btn" class="btn btn-secondary">
                        <span class="rotate-icon">↻</span> 우회전
                    </button>
                    <button id="crop-complete-btn" class="btn btn-primary">
                        ✓ 완료
                    </button>
                    <button id="crop-skip-btn" class="btn btn-link">
                        편집 없이 사용
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Cropper.js for image editing -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
    <script src="js/script.js"></script>
</body>
</html>
